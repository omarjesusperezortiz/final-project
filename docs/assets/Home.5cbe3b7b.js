import{o as u,k as r,p as A,j as I,d as e,l as M,m as T,a as O,b as _,i as m,w as b,t as D,n as C,T as N,e as E,g as S,F as U,q,x as z,y as w,u as F,z as j,h as B}from"./index.b0bc07c7.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";const G={},J=s=>(A("data-v-faa5598f"),s=s(),I(),s),P={class:"nav"},Q=J(()=>e("h1",{class:"app-logo"},[e("span",{class:"clip"},"TaskApp")],-1)),W=[Q];function X(s,a){return u(),r("div",P,W)}const Y=K(G,[["render",X],["__scopeId","data-v-faa5598f"]]),x=M("task",{state:()=>({task:[]}),actions:{async fetchTasks(){const{data:s}=await T.from("Task").select("*").order("id",{ascending:!1});return this.task=s,console.log(s,"lista de tasks"),this.task},async addTask(s,a){await T.from("Task").insert([{user_id:O().user.id,title:s,is_complete:!1,description:a}])},async updateTask(s,a,l){const c=await T.from("Task").update({title:s,description:a}).match({id:l});console.log(c)},async deleteTask(s){const a=await T.from("Task").delete().match({id:s});console.log(a)},async toggleTask(s,a){await T.from("Task").update({is_complete:s}).match({id:a})}}});const H=s=>(A("data-v-76bedec0"),s=s(),I(),s),Z={key:0,class:"addError"},ee={class:"error-text"},se={class:"form-container"},te={class:"form-group"},ae={class:"form-group"},oe=H(()=>e("span",null,"Agregar",-1)),ne=H(()=>e("span",{class:"commandenter"},"\u2318 enter",-1)),le=[oe,ne],ce={__name:"NewTask",emits:["add-task","show"],setup(s,{emit:a}){x();const l=_(""),c=_(""),i=_(!1),h=_(null),p=()=>{if(l.value.length===0||c.value.length===0)i.value=!0,h.value="\xA1Tienes que llenar ambos campos!",setTimeout(()=>{i.value=!1},5e3);else{const v={name:l.value,description:c.value};console.log(v),a("add-task",v),l.value="",c.value="",a("show")}};return document.addEventListener("keydown",v=>{(v.metaKey||v.ctrlKey)&&v.key==="Enter"&&(console.log("fire!"),p())}),(v,d)=>(u(),r(U,null,[m(N,null,{default:b(()=>[i.value?(u(),r("div",Z,[e("h3",ee,D(h.value),1)])):C("",!0)]),_:1}),e("div",se,[e("div",te,[E(e("input",{class:"input-field-input",type:"text",placeholder:"Titulo de tarea","onUpdate:modelValue":d[0]||(d[0]=g=>l.value=g)},null,512),[[S,l.value]])]),e("div",ae,[E(e("textarea",{class:"input-field-input",rows:"4",type:"text",placeholder:"Descripcion...","onUpdate:modelValue":d[1]||(d[1]=g=>c.value=g)},null,512),[[S,c.value]])]),e("div",{class:"form-group task-button"},[e("button",{onClick:p,class:"button"},le)])])],64))}},ie=K(ce,[["__scopeId","data-v-76bedec0"]]);const L=s=>(A("data-v-fd9c983f"),s=s(),I(),s),de={class:"task-container"},ue={class:"card-task"},re=["onClick"],_e=L(()=>e("i",{class:"fa-solid fa-check"},null,-1)),pe=[_e],ve={class:"overflow"},ke={class:"overflow"},fe=["onClick"],he=L(()=>e("i",{class:"fa-solid fa-trash"},null,-1)),me=[he],ge=["onClick"],ye=L(()=>e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),Te=[ye],we={key:0,class:"changeName"},be={class:"add-task-form"},$e={class:"form-group"},xe={class:"form-group"},Ce={class:"form-group change-button"},Ne=["onClick"],Ee=["onClick"],Se={__name:"TaskCard",props:{task:Array},emits:["editTask","deleteTask","toggleTask"],setup(s,{emit:a}){const l=_(""),c=_(""),i=_(!1),h=_(null),p=_(!1),v=o=>{h.value=o.id,i.value=!i.value,l.value=o.title,c.value=o.description,console.log(o.id,i.value)},d=(o,f)=>{o=!o,p.value=!p.value,a("toggleTask",o,f),console.log(o,f,"toggle y id")},g=o=>{console.log(o),a("deleteTask",o)},V=(o,f)=>{console.log(l.value,o,c.value,"name input value"),a("editTask",l.value,c.value,o),l.value="",c.value="",i.value=!1};return document.addEventListener("keydown",o=>{o.key==="Escape"&&(i.value=!1)}),(o,f)=>(u(),r("div",de,[m(z,null,{default:b(()=>[(u(!0),r(U,null,q(s.task,(n,y)=>(u(),r("div",{class:w(["card-container",{doneCard:n.is_complete==!0}])},[e("div",ue,[e("button",{class:w(["buttonDone buttonRight",{buttonlight:n.is_complete==!0,doneclicked:n.is_complete==!0}]),type:"button",onClick:t=>d(n.is_complete,n.id),id:"buttonDone"},pe,10,re),e("h3",ve,D(n.title),1),e("p",ke,D(n.description),1),n.is_complete?(u(),r("button",{key:0,class:w([{buttonlight:n.is_complete==!0},"buttonRight"]),type:"button",onClick:t=>g(n.id),id:"buttonDelete"},me,10,fe)):(u(),r("button",{key:1,class:w([{buttonlight:n.is_complete==!0},"buttonRight"]),type:"button",onClick:t=>v(n),id:"buttonEdit"},Te,10,ge))]),m(N,null,{default:b(()=>[i.value&&h.value===n.id?(u(),r("div",we,[e("div",be,[e("div",$e,[E(e("input",{class:"input-field-input",type:"text","onUpdate:modelValue":f[0]||(f[0]=t=>l.value=t)},null,512),[[S,l.value]])]),e("div",xe,[E(e("textarea",{class:"input-field-input",type:"text",rows:"6",style:{overflow:"scroll"},"onUpdate:modelValue":f[1]||(f[1]=t=>c.value=t)},null,512),[[S,c.value]])]),e("div",Ce,[e("button",{onClick:t=>V(n.id,y),class:"button"}," Editar tarea ",8,Ne)])])])):C("",!0)]),_:2},1024),m(N,null,{default:b(()=>[i.value&&h.value===n.id?(u(),r("div",{key:0,onClick:t=>v(n),class:"background-task-effect"},null,8,Ee)):C("",!0)]),_:2},1024)],2))),256))]),_:1})]))}},Ae=K(Se,[["__scopeId","data-v-fd9c983f"]]);const R=s=>(A("data-v-8b3a69ea"),s=s(),I(),s),Ie={class:"user-container"},Ke={class:"logo-container"},Ve={class:"main-container"},De=R(()=>e("h3",null,[B("No tienes m\xE1s tareas. "),e("br"),B("Agrega una nueva! :)")],-1)),Ue=[De],Le=R(()=>e("span",{class:"agregartext"}," Agregar tarea",-1)),Re=R(()=>e("span",{class:"commandkey"},"\u2318K",-1)),Be=[Le,Re],Oe={key:0},He={class:"card-container new-task",id:"newTask"},Me={__name:"Home",setup(s){const a=x(),l=F(),c=O(),i=_([]),h=_([]),p=_(!1);(async()=>{h.value=await c.fetchUser()})();const d=async()=>{i.value=await a.fetchTasks()};d();async function g(t){await a.addTask(t.name,t.description),d()}const V=async(t,k,$)=>{await x().updateTask(t,k,$),d()},o=async(t,k)=>{await a.toggleTask(t,k),d()},f=async t=>{await x().deleteTask(t),d()},n=async()=>{try{await T.auth.signOut(),l.push({name:"login"})}catch(t){console.log(t,"logout")}},y=()=>{p.value=!p.value};return document.addEventListener("keydown",t=>{t.key==="Escape"&&!(t.ctrlKey||t.altKey||t.shiftKey)&&(p.value=!1,console.log(p.value,"valor de show"))}),document.addEventListener("keydown",t=>{(t.metaKey||t.ctrlKey)&&t.key==="k"&&(console.log("fire!"),y())}),(t,k)=>(u(),r(U,null,[e("header",null,[e("div",Ie,[e("button",{class:"logOut",onClick:k[0]||(k[0]=$=>n())},"Log Out")]),e("div",Ke,[m(Y)])]),e("div",Ve,[e("div",{class:w(["dotasks",{appear:i.value==![]}])},Ue,2),e("button",{class:"AgregarTarea",onClick:k[1]||(k[1]=$=>y())},Be)]),m(N,null,{default:b(()=>[p.value?(u(),r("div",Oe,[e("div",{onClick:k[2]||(k[2]=$=>y()),class:"background-task-effect",id:"backTask"}),e("div",He,[m(ie,{class:"newTaskBox",onAddTask:g,onShow:y})])])):C("",!0)]),_:1}),m(Ae,{task:j(a).task,onToggleTask:o,onEditTask:V,onDeleteTask:f},null,8,["task"])],64))}},Fe=K(Me,[["__scopeId","data-v-8b3a69ea"]]);export{Fe as default};
