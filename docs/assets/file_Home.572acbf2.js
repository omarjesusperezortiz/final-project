import{o as r,f as _,d as e,p as S,k as A,l as M,m as y,a as B,b as v,e as h,w as b,t as D,g as x,T as C,i as N,v as E,F as L,n as q,q as F,x as w,u as j,s as z,y as G,j as R}from"./file_index.c14c5612.js";import{_ as I}from"./file__plugin-vue_export-helper.e718e6fb.js";const J=s=>(S("data-v-fc965c65"),s=s(),A(),s),P={class:"nav"},Q=J(()=>e("h1",{class:"app-logo"},[e("span",{class:"clip"},"TaskApp")],-1)),W={class:"user-container"},X={__name:"Navbar",emits:["log-out"],setup(s,{emit:a}){const n=()=>{a("log-out")};return(l,i)=>(r(),_("div",P,[Q,e("div",W,[e("button",{class:"logOut",onClick:i[0]||(i[0]=d=>n())},"Log Out")])]))}},Y=I(X,[["__scopeId","data-v-fc965c65"]]),$=M("task",{state:()=>({task:[]}),actions:{async fetchTasks(){const{data:s}=await y.from("Task").select("*").order("id",{ascending:!1});return this.task=s,console.log(s,"lista de tasks"),this.task},async addTask(s,a){await y.from("Task").insert([{user_id:B().user.id,title:s,is_complete:!1,description:a}])},async updateTask(s,a,n){const l=await y.from("Task").update({title:s,description:a}).match({id:n});console.log(l)},async deleteTask(s){const a=await y.from("Task").delete().match({id:s});console.log(a)},async toggleTask(s,a){await y.from("Task").update({is_complete:s}).match({id:a})}}});const H=s=>(S("data-v-76bedec0"),s=s(),A(),s),Z={key:0,class:"addError"},ee={class:"error-text"},se={class:"form-container"},te={class:"form-group"},ae={class:"form-group"},oe=H(()=>e("span",null,"Agregar",-1)),ne=H(()=>e("span",{class:"commandenter"},"\u2318 enter",-1)),le=[oe,ne],ce={__name:"NewTask",emits:["add-task","show"],setup(s,{emit:a}){$();const n=v(""),l=v(""),i=v(!1),d=v(null),m=()=>{if(n.value.length===0||l.value.length===0)i.value=!0,d.value="\xA1Tienes que llenar ambos campos!",setTimeout(()=>{i.value=!1},5e3);else{const p={name:n.value,description:l.value};console.log(p),a("add-task",p),n.value="",l.value="",a("show")}};return document.addEventListener("keydown",p=>{(p.metaKey||p.ctrlKey)&&p.key==="Enter"&&(console.log("fire!"),m())}),(p,u)=>(r(),_(L,null,[h(C,null,{default:b(()=>[i.value?(r(),_("div",Z,[e("h3",ee,D(d.value),1)])):x("",!0)]),_:1}),e("div",se,[e("div",te,[N(e("input",{class:"input-field-input",type:"text",placeholder:"Titulo de tarea","onUpdate:modelValue":u[0]||(u[0]=g=>n.value=g)},null,512),[[E,n.value]])]),e("div",ae,[N(e("textarea",{class:"input-field-input",rows:"4",type:"text",placeholder:"Descripcion...","onUpdate:modelValue":u[1]||(u[1]=g=>l.value=g)},null,512),[[E,l.value]])]),e("div",{class:"form-group task-button"},[e("button",{onClick:m,class:"button"},le)])])],64))}},ie=I(ce,[["__scopeId","data-v-76bedec0"]]);const U=s=>(S("data-v-d46fff3a"),s=s(),A(),s),de={class:"task-container"},ue={class:"card-task"},re=["onClick"],_e=U(()=>e("i",{class:"fa-solid fa-check"},null,-1)),pe=[_e],ve={class:"overflow"},ke={class:"overflow"},fe=["onClick"],he=U(()=>e("i",{class:"fa-solid fa-trash"},null,-1)),me=[he],ge=["onClick"],Te=U(()=>e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),ye=[Te],we={key:0,class:"changeName"},be={class:"add-task-form"},$e={class:"form-group"},xe={class:"form-group"},Ce={class:"form-group change-button"},Ne=["onClick"],Ee=["onClick"],Se={__name:"TaskCard",props:{task:Array},emits:["editTask","deleteTask","toggleTask"],setup(s,{emit:a}){const n=v(""),l=v(""),i=v(!1),d=v(null),m=v(!1),p=o=>{d.value=o.id,i.value=!i.value,n.value=o.title,l.value=o.description,console.log(o.id,i.value)},u=(o,k)=>{o=!o,m.value=!m.value,a("toggleTask",o,k),console.log(o,k,"toggle y id")},g=o=>{console.log(o),a("deleteTask",o)},K=(o,k)=>{console.log(n.value,o,l.value,"name input value"),a("editTask",n.value,l.value,o),n.value="",l.value="",i.value=!1};return document.addEventListener("keydown",o=>{o.key==="Escape"&&(i.value=!1)}),(o,k)=>(r(),_("div",de,[h(F,null,{default:b(()=>[(r(!0),_(L,null,q(s.task,(c,T)=>(r(),_("div",{class:w(["card-container",{doneCard:c.is_complete==!0}])},[e("div",ue,[e("button",{class:w(["buttonDone buttonRight",{buttonlight:c.is_complete==!0,doneclicked:c.is_complete==!0}]),type:"button",onClick:t=>u(c.is_complete,c.id),id:"buttonDone"},pe,10,re),e("h3",ve,D(c.title),1),e("p",ke,D(c.description),1),c.is_complete?(r(),_("button",{key:0,class:w([{buttonlight:c.is_complete==!0},"buttonRight"]),type:"button",onClick:t=>g(c.id),id:"buttonDelete"},me,10,fe)):(r(),_("button",{key:1,class:w([{buttonlight:c.is_complete==!0},"buttonRight"]),type:"button",onClick:t=>p(c),id:"buttonEdit"},ye,10,ge))]),h(C,null,{default:b(()=>[i.value&&d.value===c.id?(r(),_("div",we,[e("div",be,[e("div",$e,[N(e("input",{class:"input-field-input",type:"text","onUpdate:modelValue":k[0]||(k[0]=t=>n.value=t)},null,512),[[E,n.value]])]),e("div",xe,[N(e("textarea",{class:"input-field-input",type:"text",rows:"6",style:{overflow:"scroll"},"onUpdate:modelValue":k[1]||(k[1]=t=>l.value=t)},null,512),[[E,l.value]])]),e("div",Ce,[e("button",{onClick:t=>K(c.id,T),class:"button"}," Editar tarea ",8,Ne)])])])):x("",!0)]),_:2},1024),h(C,null,{default:b(()=>[i.value&&d.value===c.id?(r(),_("div",{key:0,onClick:t=>p(c),class:"background-task-effect"},null,8,Ee)):x("",!0)]),_:2},1024)],2))),256))]),_:1})]))}},Ae=I(Se,[["__scopeId","data-v-d46fff3a"]]);const O=s=>(S("data-v-4b944d38"),s=s(),A(),s),Ie={class:"logo-container"},Ke={class:"main-container"},Ve=O(()=>e("h3",null,[R("No tienes tareas. "),e("br"),R("Agrega una nueva! ;)")],-1)),De=[Ve],Le=O(()=>e("span",{class:"agregartext"}," Agregar tarea",-1)),Ue=O(()=>e("span",{class:"commandkey"},"\u2318K",-1)),Oe=[Le,Ue],Re={key:0},Be={class:"card-container new-task",id:"newTask"},He={__name:"Home",setup(s){const a=$(),n=j(),l=B(),i=v([]),d=v(!1),{user:m}=z(l);(async()=>{await l.fetchUser(),console.log("Hola!,",m.value.email)})();const u=async()=>{i.value=await a.fetchTasks()};u();async function g(t){await a.addTask(t.name,t.description),u()}const K=async(t,f,V)=>{await $().updateTask(t,f,V),u()},o=async(t,f)=>{await a.toggleTask(t,f),u()},k=async t=>{await $().deleteTask(t),u()},c=async()=>{try{await y.auth.signOut(),n.push({name:"login"})}catch{}},T=()=>{d.value=!d.value};return document.addEventListener("keydown",t=>{t.key==="Escape"&&!(t.ctrlKey||t.altKey||t.shiftKey)&&(d.value=!1)}),document.addEventListener("keydown",t=>{(t.metaKey||t.ctrlKey)&&t.key==="k"&&T()}),(t,f)=>(r(),_(L,null,[e("header",null,[e("div",Ie,[h(Y,{onLogOut:c})])]),e("div",Ke,[e("div",{class:w(["dotasks",{appear:i.value==![]}])},De,2),e("button",{class:"AgregarTarea",onClick:f[0]||(f[0]=V=>T())},Oe)]),h(C,null,{default:b(()=>[d.value?(r(),_("div",Re,[e("div",{onClick:f[1]||(f[1]=V=>T()),class:"background-task-effect",id:"backTask"}),e("div",Be,[h(ie,{class:"newTaskBox",onAddTask:g,onShow:T})])])):x("",!0)]),_:1}),h(Ae,{task:G(a).task,onToggleTask:o,onEditTask:K,onDeleteTask:k},null,8,["task"])],64))}},Fe=I(He,[["__scopeId","data-v-4b944d38"]]);export{Fe as default};
